<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Time Change</title>
<script type="text/javascript" language="JavaScript">
function transferTime(){
	time = document.time_form.time_h.value + ":" + document.time_form.time_m.value + " " + document.time_form.ampm.value;
	time_h = document.time_form.time_h.value;
	time_m = document.time_form.time_m.value;
	time_ampm = document.time_form.ampm.value;
	
	window.opener.time(time,time_h,time_m,time_ampm);
}
function setFocus()
{
	document.getElementById("time_h").focus();
} 
//Using this to move from the notes box to the submit button
function disableEnterKey(e)
{
	var key;
	if(window.event)
		key = window.event.keyCode; //IE
		if(key == 13)
		{
			document.getElementById("submit").focus();
		}
	else
		key = e.which; //FF
		if(key == 13)
		{
			document.getElementById("submit").focus();
		}

	return (key != 13)
}

//This moves to the next field when the enter key is pressed              
function handleEnter (field, event) {
		var keyCode = event.keyCode ? event.keyCode : event.which ? event.which : event.charCode;
		if (keyCode == 13) {
			var i;
			for (i = 0; i < field.form.elements.length; i++)
				if (field == field.form.elements[i])
					break;
			i = (i + 1) % field.form.elements.length;
			field.form.elements[i].focus();
			return false;
		} 
		else
		return true;
	} 
	
function checkLen(x,y)
{
if (y.length==x.maxLength)
  {
  var next=x.tabIndex;
  if (next<document.getElementById("time_form").length)
    {
    document.getElementById("time_form").elements[next].focus();
    }
  }
}
</script>


<link href="../napa.css" rel="stylesheet" type="text/css" />
</head>

<body onload="setFocus()">
<form name="time_form" id="time_form" method="post" action="">
  <table width="350" align="center">
    <tr>
      <td width="128"><div align="right">Time:</div></td>
      <td width="160"><input class="form_input_time" name="time_h" type="text" id="time_h" size="2" maxlength="2" tabindex="1" onkeypress="return handleEnter(this, event)" onkeyup="checkLen(this,this.value)"/>
        :
        <input class="form_input_time" name="time_m" type="text" id="time_m" size="2" maxlength="2" tabindex="2" onkeypress="return handleEnter(this, event)" onkeyup="checkLen(this,this.value)"/> <input class="form_input_time" name="ampm" type="text" id="ampm" size="2" maxlength="2" tabindex="3"  onkeyup="checkLen(this,this.value)" /></td>
    </tr>
    <tr>
      <td colspan="2"><div align="center">Fill in the time ordered (eg. 09:24 am)</div></td>
    </tr>
    <tr>
      <td colspan="2"><div align="center">
        <p><strong>Be very careful when entering times</strong></p>
        <p>&nbsp;</p>
      </div></td>
    </tr>
    <tr>
      <td><div align="center">
        <input name="button" type="submit" class="button" id="submit" onClick="javascript:window.close();transferTime()" value="Send &amp; Close" />
      </div></td>
      <td><input name="button2" type="submit" class="button" id="button2" onClick="javascript:window.close()" value="Cancel &amp; Close" /></td>
    </tr>
  </table>
</form>
</body>
</html>
